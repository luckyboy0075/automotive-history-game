
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/admin.js" defer></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
    <header>
        <h1>Admin Panel</h1>
        <div id="netlify-login">
            <button id="login-btn">Login</button>
            <button id="logout-btn" style="display: none;">Logout</button>
        </div>
    </header>
    <main>
        <section id="key-features">
            <h2>Manage Key Features</h2>
            <form id="add-feature-form">
                <input type="text" id="feature-title" placeholder="Feature Title" required>
                <textarea id="feature-description" placeholder="Feature Description" required></textarea>
                <button type="submit">Add Feature</button>
            </form>
            <div id="features-list">
                <!-- Dynamically populated features will go here -->
            </div>
        </section>
        <section id="goals">
            <h2>Manage Goals</h2>
            <form id="add-goal-form">
                <input type="text" id="goal-title" placeholder="Goal Title" required>
                <textarea id="goal-description" placeholder="Goal Description" required></textarea>
                <select id="goal-status">
                    <option value="planned">Planned</option>
                    <option value="in-progress">In Progress</option>
                    <option value="completed">Completed</option>
                </select>
                <button type="submit">Add Goal</button>
            </form>
            <div id="goals-list">
                <!-- Dynamically populated goals will go here -->
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Automotive History Game. Admin Panel.</p>
    </footer>
    <script>
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", (user) => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => {
                        document.location.href = "/admin.html";
                    });
                } else {
                    document.getElementById("login-btn").style.display = "none";
                    document.getElementById("logout-btn").style.display = "block";
                }
            });
        }

        document.getElementById("logout-btn").addEventListener("click", () => {
            window.netlifyIdentity.logout();
            document.location.href = "/index.html";
        });
    </script>
</body>
</html>
